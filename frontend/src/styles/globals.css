@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --font-sans: "Inter Variable", ui-sans-serif, system-ui, -apple-system, "Segoe UI",
      Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
    --font-mono: "JetBrains Mono Variable", ui-monospace, SFMono-Regular, Menlo, Monaco,
      Consolas, "Liberation Mono", "Courier New", monospace;

    --radius: 14px;

    /* Light */
    --background: 0 0% 100%;
    --foreground: 240 10% 3.9%;

    --card: 0 0% 100%;
    --card-foreground: 240 10% 3.9%;

    --popover: 0 0% 100%;
    --popover-foreground: 240 10% 3.9%;

    --muted: 240 4.8% 95.9%;
    --muted-foreground: 240 3.8% 46.1%;

    --accent: 240 4.8% 95.9%;
    --accent-foreground: 240 5.9% 10%;

    --border: 240 5.9% 90%;
    --input: 240 5.9% 90%;

    /* Accent (runtime-updated) */
    --primary: 239 84% 60%;
    --primary-foreground: 0 0% 100%;
    --ring: 239 84% 60%;

    --secondary: 240 4.8% 95.9%;
    --secondary-foreground: 240 5.9% 10%;

    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 0 0% 98%;

    --shadow-soft: 0 10px 30px rgba(2, 6, 23, 0.06);
    --shadow-elevated: 0 18px 45px rgba(2, 6, 23, 0.10);
  }

  .dark {
    --background: 240 10% 3.9%;
    --foreground: 0 0% 98%;

    --card: 240 10% 7%;
    --card-foreground: 0 0% 98%;

    --popover: 240 10% 7%;
    --popover-foreground: 0 0% 98%;

    --muted: 240 3.7% 15.9%;
    --muted-foreground: 240 5% 64.9%;

    --accent: 240 3.7% 15.9%;
    --accent-foreground: 0 0% 98%;

    --border: 240 3.7% 15.9%;
    --input: 240 3.7% 15.9%;

    --secondary: 240 3.7% 15.9%;
    --secondary-foreground: 0 0% 98%;

    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 0% 98%;

    --shadow-soft: 0 10px 28px rgba(0, 0, 0, 0.35);
    --shadow-elevated: 0 18px 50px rgba(0, 0, 0, 0.55);
  }

  html {
    color-scheme: light dark;
  }

  body {
    @apply bg-background text-foreground font-sans antialiased;
    min-height: 100dvh;
  }

  /* Unified native select popup look across pages (browser-supported subset). */
  .ts-select option,
  .ts-select optgroup {
    background-color: hsl(var(--popover));
    color: hsl(var(--popover-foreground));
  }

  .ts-select option:checked {
    background: hsl(var(--accent));
    color: hsl(var(--accent-foreground));
  }

  .ts-select {
    color: hsl(var(--foreground));
  }

  /* Better default focus ring for keyboard users */
  :focus-visible {
    @apply outline-none ring-2 ring-ring ring-offset-2 ring-offset-background;
  }

  /* Thin styled scrollbar for scrollable panels */
  .dark *::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }
  .dark *::-webkit-scrollbar-track {
    background: transparent;
  }
  .dark *::-webkit-scrollbar-thumb {
    background-color: hsl(var(--border));
    border-radius: 3px;
  }
  .dark *::-webkit-scrollbar-thumb:hover {
    background-color: hsl(var(--muted-foreground) / 0.4);
  }

  @keyframes ts-flash {
    0% {
      opacity: 0.7;
    }
    100% {
      opacity: 0;
    }
  }

  @keyframes ts-fade-in {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }
}

@layer components {
  .ts-dropdown-trigger {
    @apply h-10 w-full rounded-xl border border-border/70 bg-card/60 px-3 text-sm text-foreground shadow-soft hover:bg-card;
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 ring-offset-background;
    @apply disabled:cursor-not-allowed disabled:bg-muted/20 disabled:text-muted-foreground disabled:opacity-60;
    transition-property: background-color, border-color, color, box-shadow;
    transition-duration: 200ms;
  }

  .ts-dropdown-panel {
    z-index: 2100;
    @apply min-w-48 overflow-hidden rounded-xl border border-border/70 bg-popover/95 p-1 text-popover-foreground shadow-elevated backdrop-blur-md;
    animation: ts-fade-in 180ms ease-out;
  }

  .ts-dropdown-item {
    @apply relative flex h-9 cursor-default select-none items-center gap-2 rounded-lg px-2.5 py-2 text-sm outline-none;
    @apply focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50;
  }

  .app-backdrop {
    background:
      radial-gradient(1000px circle at 18% -10%, hsl(var(--primary) / 0.12), transparent 55%),
      radial-gradient(900px circle at 78% 0%, hsl(var(--primary) / 0.09), transparent 55%);
  }
}
